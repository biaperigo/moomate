<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Agendamento - Moomate</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"/>
  <link rel="icon" type="image/x-icon" href="src/images/favicon.ico">
  <link rel="stylesheet" href="src/styles/agendamentoM.css"/>
  <link rel="stylesheet" href="src/styles/agendamentoC.css"/>
</head>
<body>

<header class="top-bar">
  <div class="logo-area">
    <img src="src/images/favicon.png" alt="Logo Moomate" />
  </div>

  <nav class="nav-links" id="navMenu">
    <a href="homeM.html">Home</a>
    <a href="agendamentoM.html">Agendamento</a>
    <a href="entregasM.html">Entregas</a>
    <a href="carteiraM.html">Carteira</a>
    <a href="suporteM.html">Suporte</a>
    <a href="ecopontosM.html">Pontos de coleta</a>
  </nav>

  <div class="header-icons">
    <a href="dadospessoaisM.html" title="Perfil"><i class="fa-solid fa-user-circle"></i></a>
    <a href="configuraçõesM.html" title="Configurações"><i class="fa-solid fa-gear"></i></a>
    
    <button class="menu-toggle" id="menuToggle">
      <i class="fa-solid fa-bars"></i>
    </button>
  </div>
</header>

<section class="banner">
  <img src="src/images/bannermotorista.png" alt="banner motorista">
  <div class="banner-text">
    <h2>Ganhe dinheiro com seu veículo fazendo mudanças.</h2>
  </div>
</section>

<!-- Tabs Agendamento -->
<nav class="tabs">
  <ul>
    <li><a href="#" class="tab-link active" data-tab="solicitacoes">Solicitações</a></li>
    <li><a href="#" class="tab-link" data-tab="agendados">Agendados</a></li>
  </ul>
</nav>

<!-- Conteúdo da Tab Solicitações -->
<section class="delivery-section">
  <div id="solicitacoes" class="tab-content active">
    <h3>Propostas de entregas</h3>
    <div id="delivery-list">
      <p id="loading-message">Buscando novos pedidos...</p>
    </div>
    <button class="btn-cta" id="submitBtn">MANDAR PROPOSTA DE VALOR</button>
  </div>

  <!-- Conteúdo da Tab Agendados -->
  <div id="agendados" class="tab-content">
    <h3>Serviços agendados</h3>
    <div id="scheduled-list">
      <!-- Conteúdo preenchido pelo JS -->
    </div>
  </div>
</section>

<!-- Modal de Envio de Proposta -->
<div id="proposalModal" class="modal-overlay" style="display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.45 );position:fixed;inset:0;z-index:9999;opacity:0;transition:opacity .2s ease;">
  <div class="modal-content conteudo-modal" style="width:min(520px,92vw);background:#ffffff;border:3px solid #ff6b35;border-radius:16px;padding:20px;box-shadow:0 16px 40px rgba(0,0,0,.35);transform:scale(.96);transition:transform .2s ease;position:relative;">
    <button id="modalClose" aria-label="Fechar" style="position:absolute;top:10px;right:12px;background:transparent;border:0;font-size:22px;color:#888;cursor:pointer">&times;</button>
    <h2 style="margin:0 0 6px 0;color:#1e1e1e;font-size:1.6rem;font-weight:800;">Enviar Proposta</h2>
    <p style="margin:0 0 12px 0;color:#6b6b6b">Preencha os detalhes da sua oferta para o cliente.</p>
    
    <div class="modal-input-group" style="margin:10px 0 8px 0;display:flex;flex-direction:column;gap:6px;">
      <label for="proposalPrice" style="font-weight:700;color:#333"><i class="fa-solid fa-dollar-sign"></i> Seu Valor Base (R$)</label>
      <input type="number" id="proposalPrice" placeholder="Ex: 80.00" min="0" style="padding:12px;border:1px solid #ddd;border-radius:10px;outline:none;">
      <small id="priceRangeHint" style="display:block;margin-top:6px;color:#666"></small>
    </div>

  

      <div class="modal-input-group" style="margin:8px 0;display:flex;flex-direction:column;gap:6px;">
      <label for="proposalHelpers" style="font-weight:700;color:#333"><i class="fa-solid fa-users"></i> Número de Motoristas (de 0 a 5)</label>
      <select id="proposalHelpers" style="padding:12px;border:1px solid #ddd;border-radius:10px;outline:none;">
        <option value="0">0 Motoristas</option>
        <option value="1">1 Motorista</option>
        <option value="2">2 Motoristas</option>
        <option value="3">3 Motoristas</option>
        <option value="4">4 Motoristas</option>
        <option value="5">5 Motoristas</option>
      </select>
    </div>

    <div class="modal-input-group" style="margin:8px 0;display:flex;flex-direction:column;gap:6px;">
      <label for="proposalVehicle" style="font-weight:700;color:#333"><i class="fa-solid fa-truck"></i> Tamanho do seu Veículo</label>
      <select id="proposalVehicle" style="padding:12px;border:1px solid #ddd;border-radius:10px;outline:none;">
        <option value="pequeno">Pequeno</option>
        <option value="medio">Médio</option>
        <option value="grande">Grande</option>
      </select>
    </div>

    <small class="price-summary" style="display:block;margin:6px 0 14px 0;color:#666">O cliente verá um valor final com base nas suas escolhas + taxa da plataforma.</small>
    <button class="btn-cta" id="sendProposalBtn" style="width:100%;padding:14px 16px;background:linear-gradient(180deg,#ff7a3f 0%,#ff6b35 100%);border:0;color:#fff;border-radius:12px;cursor:pointer;box-shadow:0 6px 16px rgba(255,107,53,.45);font-weight:900;">Confirmar e Enviar Proposta</button>
  </div>
</div>

<!-- Modal de confirmação (mesmo padrão do cliente) -->
<div id="modalPropostaAceita" class="mm-modal" style="display:none;">
  <div class="mm-modal-backdrop"></div>
  <div class="mm-modal-dialog" role="dialog" aria-labelledby="modalPropostaAceitaTitulo" aria-modal="true">
    <div class="mm-modal-header">
      <h3 id="modalPropostaAceitaTitulo"><i class="fa-solid fa-bell"></i> Proposta Aceita!</h3>
    </div>
    <div class="mm-modal-body">
      Um cliente aceitou sua proposta! Redirecionando para "Agendados"...
    </div>
  </div>
</div>

<footer>
  <div id="footer_content">
    <div class="footer-left">
      <img src="src/images/logobranca.png" alt="Logo da Moomate" id="moomate_logo">
    </div>
    <div class="footer-social">
      <span class="social-text">Acompanhe-nos</span>
      <div class="social-icons">
        <a href="https://www.instagram.com/moomateoficial" class="social-icon" target="_blank"><i class="fa-brands fa-instagram"></i></a>
        <a href="https://www.linkedin.com/company/moomate" class="social-icon" target="_blank"><i class="fa-brands fa-linkedin-in"></i></a>
      </div>
    </div>
  </div>
  <div id="footer_items">
    <span id="copyright">© 2025 Moomate. Todos os direitos reservados.</span>
  </div>
</footer>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script>
  (function( ){
    const firebaseConfig = {
      apiKey: "AIzaSyB9ZuAW1F9rBfOtg3hgGpA6H7JFUoiTlhE",
      authDomain: "moomate-39239.firebaseapp.com",
      projectId: "moomate-39239",
      storageBucket: "moomate-39239.appspot.com",
      messagingSenderId: "637968714747",
      appId: "1:637968714747:web:ad15dc3571c22f046b595e",
      measurementId: "G-62J7Q8CKP4"
    };
    try{ if (!window.firebase?.apps?.length) firebase.initializeApp(firebaseConfig); }catch(e){ console.error('Firebase init failed:', e); }
  })();
</script>
<script src="src/javascript/agendamentoM.js" defer></script>

</body>
</html>
